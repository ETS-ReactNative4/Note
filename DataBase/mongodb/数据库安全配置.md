[Mongodb](https://docs.mongodb.com/manual/mongo/s)

## 数据库安全概览
1. 物理隔离 不太现实
2. 网络隔离
3. 防火墙隔离
4. 用户名密码

## 数据库连接验证
1. auth开启
2. keyprofile 开启

## mongodb 创建角色
1. 创建语法：createUser
2. {
	user: "<name>",
	pwd: "cleartext password",
	customData: {<any infomation>},
	roles: [{role: "<role>", db: "<database>"}]
}
3. 角色类型：内建类型（read,readWrite, dbAdmin,dbOwner, userAdmin）

## 其他角色
集群角色（clusterAdmin, clusterManager...）
备份角色 (backup, restore...)

## 修改默认端口
```
vim /etc/mongod.conf

修改
net:
	port: 27017
	bindIp: 0.0.0.0
```

ps -ef | grep mongod
kill process_id

重启MongoDB
```
service mongod start
```

链接测试：
```
本地链接 
mongo --port 28015

远程链接
mongo mongodb://mongodb0.example.com:28015

也可以
mongo --host mongodb0.example.com --port 28015
```

## 增加链接验证 MongoDB Instance with Authentication
//指定用户名和密码连接到指定的MongoDB数据库test
mongo 192.168.1.200:27017/test -u user -p password

[使用用户管理员帐户连接和授权](https://www.jianshu.com/p/27fffcd68afe)
➜  ~ mongo 47.92.153.154:90100/Ranch -u Ranch -p yunfarm_000 --authenticationDatabase "admin"
MongoDB shell version v3.4.6
connecting to: mongodb://47.94.154.154:9011/Ranch
MongoDB server version: 2.6.5
WARNING: shell and server versions do not match

[管理分布式session的四种方式](https://www.cnblogs.com/saoyou/p/11107488.html)

## 1.session复制
session复制是早期企业应用系统使用比较多的一种服务器集群Session管理机制

缺陷：只能使用在集群规模比较小的情况下（企业应用系统，使用人数少，相对比较常见这种模式），
当集群规模比较大的时候，集群服务器之间需要大量的通信进行Session的复制，占用服务器和网络的大量资源，系统负担较大。

## 2.session会话保持（黏滞会话）
会话保持是利用负载均衡的原地址Hash算法实现，负载均衡服务器总是将来源于同一IP的请求分发到同一台服务器上，
也可以根据cookie信息将同一个用户的请求每次都分发到同一台服务器上，不过这时的负载均衡服务器必须工作在HTTP协议层上。
这种会话保持也叫黏滞会话(Sticky Sessions)
```
在Nginx中配置的会话保持：

  upstream bakend {
      ip_hash;
      server 192.168.0.14:88;
      server 192.168.0.15:80;
  }
```
这种方案虽然保证了每个用户都能准确的拿到自己的session，而且大量用户访问也不怕，但是这种会话保持不符合系统高可用的需求。
这种方案有着致命的缺陷：一旦某台服务器发生宕机，则该服务器上的所有session信息就会不存在，用户请求就会切换到其他服务器，
而其他服务器因为没有其对应的session信息导致无法完成相关业务。所以这种方法基本上不会被采纳。

## 3.利用cookie记录session
早期的企业应用系统使用C/S架构，管理session 的方法就是将session记录在客户端，每次请求服务器的时候将session放在请求中发送给服务器，
服务器处理过请求后再将修改过的session返回给客户端。网站虽然没有客户端，但是可以利用浏览器支持的cookie记录session。

很多缺点：比如cookie的大小存在限制能记录的信息不能超过限制；比如每次请求都要传输cookie影响性能；
比如cookie可被修改或者存在破解的可能，导致cookie不能存重要信息，安全系数不够。

## 4.session服务器（集群）
目前最理想的服务器集群的session管理应该是session服务器，集成了高可用、伸缩性好、对保存信息大小没有限制、性能也相对很好。
![session服务器](https://img2018.cnblogs.com/blog/1455663/201906/1455663-20190629182432672-244092472.png)

　对于session服务器设计简单方式：

1.利用分布式缓存，数据库等，在这些产品的基础上进行包装，使其符合session的存储和访问要求。
2.另一种就是业务场景对session管理有很高的要求的时候需要开发专门的session服务管理平台。

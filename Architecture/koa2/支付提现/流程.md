## 创建batch
1. batchCode 先查询batch是否存在
2. productID 不存在查batch绑定的productId是否正确
3. 查询company 是否is_active 、存钱罐、支付密码 如果没有都会reject
4. createbatch
5. 获取batch信息 => 
```
var debtor_list = {
                identity_id : company_id,
                identity_type : 'UID',
                amount : total_amount
            };
```
6. total_amount  data.total_num*productInfo.panic_buying_price*1.5;


> Kue is a priority job queue backed by redis, built for node.js. 
[kue-github](https://github.com/Automattic/kue)
## order

```
// 消息队列
var queue = kue.createQueue({
    prefix: 'queue',
    redis: {
        db: config.queueDB,
        port: rcc.port,
        host: rcc.host,
        auth: rcc.auth_pass
    }
});


// 创建生产线
var orderLines = [];
for (var i = 0; i < orderLineNum; i++) {
    orderLines.push('order/line-' + i); // line: order/line-1
}
```


